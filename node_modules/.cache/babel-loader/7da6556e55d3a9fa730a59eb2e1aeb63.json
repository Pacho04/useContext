{"ast":null,"code":"import { useState, useEffect, useRef } from \"react\";\nexport const useFetch = url => {\n  const isMounted = useRef(true);\n  const [state, setState] = useState({\n    data: null,\n    loading: true,\n    error: null\n  });\n  useEffect(() => {\n    //vacio el cuerpo, lo necesitamos cuando se desmonta\n    return () => {\n      isMounted.current = false;\n    };\n  });\n  useEffect(() => {\n    setState({\n      data: null,\n      loading: true,\n      error: null\n    }); //para que salga el Loading para cada frase\n\n    fetch(url).then(resp => resp.json()).then(data => {\n      if (isMounted.current) setState({\n        loading: false,\n        error: null,\n        data\n      });\n    });\n  }, [url]);\n  return state;\n};","map":{"version":3,"sources":["/home/david/Escritorio/React/05-hook-app/src/hooks/useFetch.js"],"names":["useState","useEffect","useRef","useFetch","url","isMounted","state","setState","data","loading","error","current","fetch","then","resp","json"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,EAA8BC,MAA9B,QAA4C,OAA5C;AAEA,OAAO,MAAMC,QAAQ,GAAIC,GAAD,IAAS;AAE7B,QAAMC,SAAS,GAAGH,MAAM,CAAC,IAAD,CAAxB;AACA,QAAM,CAACI,KAAD,EAAQC,QAAR,IAAoBP,QAAQ,CAAC;AAC/BQ,IAAAA,IAAI,EAAE,IADyB;AAE/BC,IAAAA,OAAO,EAAE,IAFsB;AAG/BC,IAAAA,KAAK,EAAE;AAHwB,GAAD,CAAlC;AAMAT,EAAAA,SAAS,CAAE,MAAM;AACb;AAEA,WAAO,MAAM;AACTI,MAAAA,SAAS,CAACM,OAAV,GAAoB,KAApB;AACH,KAFD;AAIH,GAPQ,CAAT;AASAV,EAAAA,SAAS,CAAE,MAAK;AAEZM,IAAAA,QAAQ,CAAC;AAACC,MAAAA,IAAI,EAAC,IAAN;AAAWC,MAAAA,OAAO,EAAC,IAAnB;AAAyBC,MAAAA,KAAK,EAAC;AAA/B,KAAD,CAAR,CAFY,CAEmC;;AAE/CE,IAAAA,KAAK,CAAER,GAAF,CAAL,CACKS,IADL,CACWC,IAAI,IAAIA,IAAI,CAACC,IAAL,EADnB,EAEKF,IAFL,CAEUL,IAAI,IAAI;AAEV,UAAIH,SAAS,CAACM,OAAd,EACAJ,QAAQ,CAAC;AACLE,QAAAA,OAAO,EAAE,KADJ;AAELC,QAAAA,KAAK,EAAE,IAFF;AAGLF,QAAAA;AAHK,OAAD,CAAR;AAKH,KAVL;AAYH,GAhBQ,EAgBN,CAACJ,GAAD,CAhBM,CAAT;AAkBA,SAAOE,KAAP;AAEH,CAtCM","sourcesContent":["import { useState, useEffect, useRef } from \"react\"\n\nexport const useFetch = (url) => {\n    \n    const isMounted = useRef(true);\n    const [state, setState] = useState({\n        data: null, \n        loading: true, \n        error: null\n    })\n\n    useEffect( () => {\n        //vacio el cuerpo, lo necesitamos cuando se desmonta\n\n        return () => {\n            isMounted.current = false;\n        }\n\n    })\n\n    useEffect( () =>{\n\n        setState({data:null,loading:true, error:null}) //para que salga el Loading para cada frase\n\n        fetch( url ) \n            .then( resp => resp.json())\n            .then(data => {\n    \n                if( isMounted.current )\n                setState({\n                    loading: false,\n                    error: null,\n                    data\n                })\n            })\n\n    }, [url])\n\n    return state;\n\n}\n"]},"metadata":{},"sourceType":"module"}